(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7507:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(4836);exports.Z=void 0;var _createSvgIcon=_interopRequireDefault(__webpack_require__(4938)),_jsxRuntime=__webpack_require__(5893),_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"}),"AlternateEmail");exports.Z=_default},9469:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(4836);exports.Z=void 0;var _createSvgIcon=_interopRequireDefault(__webpack_require__(4938)),_jsxRuntime=__webpack_require__(5893),_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04L21 10zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"Key");exports.Z=_default},6429:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return __webpack_require__(4754)}])},358:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{_:function(){return BASE_URL}});let BASE_URL="http://10.100.23.126/PMS/public/api/login"},8950:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return forms_LoginForm}});var jsx_runtime=__webpack_require__(5893),react=__webpack_require__(7294),es=__webpack_require__(2664),auth=__webpack_require__(3538),AlternateEmail=__webpack_require__(7507),Key=__webpack_require__(9469);let LoginForm=param=>{let{message}=param,[email,setEmail]=(0,react.useState)(""),[password,setPassword]=(0,react.useState)(""),dispatch=(0,es.I0)((0,auth.I8)(email,password)),[formErrors,setFormErrors]=(0,react.useState)("");(0,react.useEffect)(()=>{setFormErrors(message)});let submitHandler=e=>{e.preventDefault(),dispatch((0,auth.I8)(email,password))};return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h6",{className:"text-danger mt-2 mb-3",style:{fontWeight:200},children:formErrors}),(0,jsx_runtime.jsxs)("form",{children:[(0,jsx_runtime.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,jsx_runtime.jsx)("span",{className:"input-group-text",children:(0,jsx_runtime.jsx)(AlternateEmail.Z,{})}),(0,jsx_runtime.jsx)("input",{type:"email",className:"form-control",id:"email",onChange:e=>setEmail(e.target.value),placeholder:"Email Adress"})]}),(0,jsx_runtime.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,jsx_runtime.jsx)("span",{className:"input-group-text",children:(0,jsx_runtime.jsx)(Key.Z,{})}),(0,jsx_runtime.jsx)("input",{type:"password",className:"form-control",id:"password",onChange:e=>setPassword(e.target.value),placeholder:"Password"})]}),(0,jsx_runtime.jsx)("button",{onClick:submitHandler,className:"btn btn-success mb-3",children:"Login"})]})]})},mapStateToProps=state=>({message:state.authMsg.message});var forms_LoginForm=(0,es.$j)(mapStateToProps)(LoginForm)},4754:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),next_link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1664),next_link__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_2__),next_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1163),react_redux__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2664),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2097),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9630),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9896),_components_forms_LoginForm__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8950);let login=param=>{let{isLoggedIn}=param,theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_7__.Z)(),colors=(0,_theme__WEBPACK_IMPORTED_MODULE_5__.tokens)(theme.palette.mode),router=(0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{isLoggedIn&&router.push("/")},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:isLoggedIn?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"row",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-lg-3"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"col-lg-6 bg-light p-5 mt-5 rounded",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_link__WEBPACK_IMPORTED_MODULE_2___default(),{href:"/",className:"anchor",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.Z,{variant:"h1",color:colors.greenAccent[300],className:"text-center",children:"NSRIC"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.Z,{variant:"h2",color:colors.greenAccent[300],className:"mb-4",children:"Login"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_forms_LoginForm__WEBPACK_IMPORTED_MODULE_6__.Z,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-lg-3"})]})})})},mapStateToProps=state=>({isLoggedIn:state.auth.token});__webpack_exports__.default=(0,react_redux__WEBPACK_IMPORTED_MODULE_4__.$j)(mapStateToProps)(login)},3538:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{I8:function(){return auth},kS:function(){return logout}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(196),_actionTypes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8573),next_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1163),next_router__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__),_base__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(358);let authStart=()=>({type:_actionTypes__WEBPACK_IMPORTED_MODULE_2__.NN}),authSuccess=(token,userId,roles)=>(next_router__WEBPACK_IMPORTED_MODULE_1___default().push({pathname:"/"}),{type:_actionTypes__WEBPACK_IMPORTED_MODULE_2__.DP,idToken:token,userId:userId,roles:roles}),authNotValid=message=>({type:_actionTypes__WEBPACK_IMPORTED_MODULE_2__.r4,message:message}),logout=()=>(next_router__WEBPACK_IMPORTED_MODULE_1___default().push({pathname:"/login"}),{type:_actionTypes__WEBPACK_IMPORTED_MODULE_2__.LQ}),auth=(email,password)=>dispatch=>{dispatch(authStart());let apiUrl=_base__WEBPACK_IMPORTED_MODULE_3__._;axios__WEBPACK_IMPORTED_MODULE_0__.ZP.post(apiUrl,{email:email,password:password,returnSecureToken:!0}).then(response=>{response.data.success?dispatch(authSuccess(response.data.data.token,1,[])):dispatch(authNotValid(response.data.message))}).catch(err=>{console.log(err)})}}},function(__webpack_require__){__webpack_require__.O(0,[664,890,774,888,179],function(){return __webpack_require__(__webpack_require__.s=6429)}),_N_E=__webpack_require__.O()}]);