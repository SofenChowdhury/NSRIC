(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{8173:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/createUser",function(){return __webpack_require__(5805)}])},819:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),next_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1163),next_router__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__),react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2914),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2664),axios__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(196),_base__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(358),_mui_icons_material_Person__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5398),_mui_icons_material_AlternateEmail__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7507),_mui_icons_material_Key__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9469),_mui_icons_material_PhoneAndroid__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4247),_mui_icons_material_Diversity3__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6757);let RegisterForm=param=>{let{token}=param,[name,setName]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[email,setEmail]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[password,setPassword]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[phone,setPhone]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[formErrors,setFormErrors]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[roles,setRoles]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[admin_roles,setSelectedRole]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),rolesAdd=e=>{setSelectedRole([]),setSelectedRole(admin_roles=>[...admin_roles,Number(e.target.value)])};async function register(e){e.preventDefault();let apiUrl=_base__WEBPACK_IMPORTED_MODULE_5__._+"api/v1/admin/store";axios__WEBPACK_IMPORTED_MODULE_4__.ZP.post(apiUrl,{email,password,name,phone,admin_roles},{headers:{Authorization:"Bearer ".concat(token)}}).then(response=>{console.log(response.data),response.data.status?next_router__WEBPACK_IMPORTED_MODULE_2___default().push({pathname:"/"}):setFormErrors(Object.values(response.data.errors))})}return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{let apiRoles=_base__WEBPACK_IMPORTED_MODULE_5__._+"api/v1/roles";axios__WEBPACK_IMPORTED_MODULE_4__.ZP.get(apiRoles,{headers:{Authorization:"Bearer "+token}}).then(res=>{!0==res.data.status&&setRoles(res.data.data)}).catch(error=>{console.log(error)})},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-danger",style:{fontWeight:200},children:formErrors[0]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_icons_material_Person__WEBPACK_IMPORTED_MODULE_6__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",className:"form-control",id:"name",required:!0,onChange:e=>setName(e.target.value),placeholder:"Name"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_icons_material_AlternateEmail__WEBPACK_IMPORTED_MODULE_7__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",required:!0,onChange:e=>setEmail(e.target.value),placeholder:"Email"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_icons_material_Key__WEBPACK_IMPORTED_MODULE_8__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"password",className:"form-control",id:"password",required:!0,onChange:e=>setPassword(e.target.value),placeholder:"Password"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"input-group-text",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_icons_material_PhoneAndroid__WEBPACK_IMPORTED_MODULE_9__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",className:"form-control",id:"phone",required:!0,onChange:e=>setPhone(e.target.value),placeholder:"Phone Number"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-group mb-3 mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"input-group-text",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_icons_material_Diversity3__WEBPACK_IMPORTED_MODULE_10__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_11__.Z.Select,{onChange:rolesAdd,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{children:"Select a Role"}),roles.map((role,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("option",{value:role.id,children:role.name},index))]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:register,className:"btn btn-success mb-3",children:"Create User"})]})]})},mapStateToProps=state=>({token:state.auth.token});__webpack_exports__.Z=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.$j)(mapStateToProps)(RegisterForm)},5805:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2664),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9896),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2097),_mui_material__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9630),_components_global_SideBar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7313),_components_global_TopBar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6068),_components_forms_RegisterForm__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(819);let createUser=param=>{let{roles}=param,theme=(0,_mui_material__WEBPACK_IMPORTED_MODULE_7__.Z)(),colors=(0,_theme__WEBPACK_IMPORTED_MODULE_3__.tokens)(theme.palette.mode),[superAdmin,setSuperAdmin]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{roles.map(role=>{"SuperAdmin"===role.name&&setSuperAdmin(!0)})},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"app",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_global_SideBar__WEBPACK_IMPORTED_MODULE_4__.Z,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("main",{className:"content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_global_TopBar__WEBPACK_IMPORTED_MODULE_5__.Z,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"holder",children:superAdmin?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.Z,{variant:"h2",className:"mb-4",color:colors.greenAccent[300],children:"Create User Form"}),superAdmin&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_forms_RegisterForm__WEBPACK_IMPORTED_MODULE_6__.Z,{})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__.Z,{variant:"h3",color:colors.greenAccent[300],children:"Permission required!"})})]})]})})},mapStateToProps=state=>({roles:state.auth.roles});__webpack_exports__.default=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.$j)(mapStateToProps)(createUser)}},function(__webpack_require__){__webpack_require__.O(0,[664,890,640,462,510,774,888,179],function(){return __webpack_require__(__webpack_require__.s=8173)}),_N_E=__webpack_require__.O()}]);